<html>
  <head>
    <title>Elm</title>
    <script src="/index.js" charset="utf-8"></script>
  </head>

  <body>
    <div id="app"></div>
    <script>
      app = Elm.Metronome.fullscreen();
      
      var createAudio = function(name) {
        var myAudio = document.createElement('audio');
        if (myAudio.canPlayType('audio/mp3')) {
          myAudio.setAttribute('src','/audio/'+name+'.mp3');
        }
        return myAudio;
      }
      var audioObject = {
        Low: { 
          audios : [
            createAudio("lowest"),
            createAudio("lowest"),
            createAudio("lowest")
          ],
          counter: 0
        },
        High: { 
          audios : [
            createAudio("low"),
            createAudio("low"),
            createAudio("low")
          ],
          counter: 0
        },
      };
      app.ports.click.subscribe(function(name) {
        var o = audioObject[name];
        o.audios[o.counter].play();
        o.counter = o.counter == 2 ? 0 : o.counter + 1;
      });
    </script>
  </body>
</html>
